{{ title }}

<script type="text/javascript"src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=&callback=myMap&libraries=&v=weekly"></script>
<div id="googleMap" style="width: 100%; height: 100%;"></div>

    <script th:inline="javascript">

let car1 =
  {
    "Latitude": 38.017080,
    "Longitude": -99.314110
  }

let car2 =
  {
    "Latitude": 38.017080,
    "Longitude": -99.314100
  }

let car3 =
  {
    "Latitude": 38.017080,
    "Longitude": -99.314090
  }

let car4 =
  {
    "Latitude": 38.017070,
    "Longitude": -99.314110
  }

let car5 =
  {
    "Latitude": 38.017070,
    "Longitude": -99.314100
  }

let car6 =
  {
    "Latitude": 38.017070,
    "Longitude": -99.314090
  }

let exit1 = {
  "Latitude": 38.020000,
  "Longitude": -99.314080
}

let exit2 = {
  "Latitude": 38.022000,
  "Longitude": -99.314080
}

let exit3 = {
  "Latitude": 38.024000,
  "Longitude": -99.314080
}

let center = {
  "Latitude": 38.017080,
  "Longitude": -99.314100
}

// let mapProp= {center:new google.maps.LatLng(41.198193, -8.627414),zoom:18,};
let mapProp= {center:new google.maps.LatLng(38.015075, -99.314105),zoom:21,};
var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

var car1marker = new google.maps.Marker({position: new google.maps.LatLng(car1.Latitude, car1.Longitude),
    icon: {
        url: '../static/images/blue_car.png',
        scaledSize: new google.maps.Size(14, 14)
    }
});
var car2marker = new google.maps.Marker({position: new google.maps.LatLng(car2.Latitude, car2.Longitude),
    icon: {
        url: '../static/images/red_car.png',
        scaledSize: new google.maps.Size(14, 14)
    }
});
var car3marker = new google.maps.Marker({position: new google.maps.LatLng(car3.Latitude, car3.Longitude),
    icon: {
        url: '../static/images/black_car.png',
        scaledSize: new google.maps.Size(14, 14)
    }
});

var car4marker = new google.maps.Marker({position: new google.maps.LatLng(car4.Latitude, car4.Longitude),
    icon: {
        url: '../static/images/green_car.png',
        scaledSize: new google.maps.Size(14, 14)
    }
});

var car5marker = new google.maps.Marker({position: new google.maps.LatLng(car5.Latitude, car5.Longitude),
    icon: {
        url: '../static/images/pink_car.png',
        scaledSize: new google.maps.Size(14, 14)
    }
});

var car6marker = new google.maps.Marker({position: new google.maps.LatLng(car6.Latitude, car6.Longitude),
    icon: {
        url: '../static/images/grey_car.png',
        scaledSize: new google.maps.Size(14, 14)
    }
});

var exit1marker = new google.maps.Marker({position: new google.maps.LatLng(exit1.Latitude, exit1.Longitude),
    icon: {
        url: '../static/images/exit.png',
        scaledSize: new google.maps.Size(30, 30)
    }
});

var exit2marker = new google.maps.Marker({position: new google.maps.LatLng(exit2.Latitude, exit2.Longitude),
    icon: {
        url: '../static/images/exit.png',
        scaledSize: new google.maps.Size(30, 30)
    }
});

var exit3marker = new google.maps.Marker({position: new google.maps.LatLng(exit3.Latitude, exit3.Longitude),
    icon: {
        url: '../static/images/exit.png',
        scaledSize: new google.maps.Size(30, 30)
    }
});


exit1marker.setPosition(exit1.Latitude, exit1.Longitude);
exit2marker.setPosition(exit2.Latitude, exit2.Longitude);
exit3marker.setPosition(exit3.Latitude, exit3.Longitude);
exit1marker.setMap(map);
exit2marker.setMap(map);
exit3marker.setMap(map);

setInterval(updateMarker, 250);

function updateMarker(){
  $.get('get_coords', {}, function (coordinates) {
    console.log(coordinates)
    console.log("OK")
    car1.Latitude=coordinates.car1_lat
    car1.Longitude=coordinates.car1_lon
    car2.Latitude=coordinates.car2_lat
    car2.Longitude=coordinates.car2_lon
    car3.Latitude=coordinates.car3_lat
    car3.Longitude=coordinates.car3_lon
    car4.Latitude=coordinates.car4_lat
    car4.Longitude=coordinates.car4_lon
    car5.Latitude=coordinates.car5_lat
    car5.Longitude=coordinates.car5_lon
    car6.Latitude=coordinates.car6_lat
    car6.Longitude=coordinates.car6_lon
    center.Latitude=coordinates.center_lat
    center.Longitude=coordinates.center_lng
  });

  myLatLng1=new google.maps.LatLng(car1.Latitude, car1.Longitude);
  myLatLng2=new google.maps.LatLng(car2.Latitude, car2.Longitude);
  myLatLng3=new google.maps.LatLng(car3.Latitude, car3.Longitude);
  myLatLng4=new google.maps.LatLng(car4.Latitude, car4.Longitude);
  myLatLng5=new google.maps.LatLng(car5.Latitude, car5.Longitude);
  myLatLng6=new google.maps.LatLng(car6.Latitude, car6.Longitude);
  centerLatLng=new google.maps.LatLng(center.Latitude, center.Longitude);
  car1marker.setPosition(myLatLng1);
  car1marker.setMap(map);
  car2marker.setPosition(myLatLng2);
  car2marker.setMap(map);
  car3marker.setPosition(myLatLng3);
  car3marker.setMap(map);
  car4marker.setPosition(myLatLng4);
  car4marker.setMap(map);
  car5marker.setPosition(myLatLng5);
  car5marker.setMap(map);
  car6marker.setPosition(myLatLng6);
  car6marker.setMap(map);

  map.setCenter(centerLatLng);

}

</script>
